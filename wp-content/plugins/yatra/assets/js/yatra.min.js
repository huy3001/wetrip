!function(a){var s,t=(s=jQuery,{init:function(){this.cacheDom(),this.bindEvents(),this.initLib(),this.initNiceNumber()},initNiceNumber:function(){var a=this;s("body").on("click",".yatra-nice-input-number button.plus-button",function(){var t=s(this).closest(".yatra-nice-input-number").find("input");a.calculateNiceNumber(t,"plus")}),s("body").on("click",".yatra-nice-input-number button.minus-button",function(){var t=s(this).closest(".yatra-nice-input-number").find("input");a.calculateNiceNumber(t,"minus")})},calculateNiceNumber:function(t,a){var i=t.attr("data-step")===undefined?1:parseInt(t.attr("data-step")),e=t.attr("data-max")===undefined?99999:parseInt(t.attr("data-max")),n=t.attr("data-min")===undefined?0:parseInt(t.attr("data-min")),s=parseInt(t.val());"plus"===a?s+=i:s-=i,e<=s?t.val(e).trigger("change"):s<n?t.val(n).trigger("change"):t.val(s).trigger("change")},cacheDom:function(){this.$booking_form=s("#yatra-tour-booking-form-fields"),this.$yatra_update_cart=s(".yatra_update_cart")},bindEvents:function(){var n=this;this.$booking_form.on("submit",function(t){t.preventDefault(),s(this).attr("data-tour-id");var a=s(this).serialize();n.bookTour(a)}),s("body").on("click",".yatra_update_cart",function(t){t.preventDefault();var a=s(this).closest("form").serialize();n.update_cart(a,s(this))}),s("body").on("change","table.yatra_cart_table input.yatra-number-of-person-field",function(t){t.preventDefault(),s(this).closest(".yatra_cart_table").find(".yatra_update_cart").removeAttr("disabled")}),s("body").on("click",".yatra-itinerary-list-item .itinerary-heading, .yatra-itinerary-list-item .itinerary-heading, .yatra-faq-list-item .faq-heading, .yatra-faq-list-item .faq-heading",function(){if(0!==s(this).find(".icon").length||0!==s(this).find("svg").length){var t=0!==s(this).find(".icon").length?s(this).find(".icon"):s(this).find("svg");t.hasClass("fa-minus")?n.toggleYatraList(t,"close"):n.toggleYatraList(t,"open")}}),s("body").on("click",".yatra-tab-content .tab-title, .yatra-tab-content .tab-title",function(){if(0!==s(this).find(".icon").length||0!==s(this).find("svg").length){var t=0!==s(this).find(".icon").length?s(this).find(".icon"):s(this).find("svg"),a=s('<span class=""/>'),i=t.closest("h3");t.hide();var e="close";t.hasClass("fa-minus")?(e="close",a.addClass("icon fa fa-plus")):(e="open",a.addClass("icon fa fa-minus")),s.each(t.closest(".yatra-tab-content").find("ul.yatra-list li.yatra-list-item .yatra-heading"),function(){var t=s(this).find(".icon");0<t.length&&n.toggleYatraList(t,e)}),i.append(a),t.remove()}})},initLib:function(){"undefined"!=typeof s().select2&&s(".yatra-select2").select2(),"undefined"!=typeof s().datepicker&&s(".yatra-date").datepicker()},toggleYatraList:function(t,a){"open"==a?this.listToggleOpen(t):this.listToggleClose(t)},listToggleOpen:function(t){t.closest("li.yatra-list-item").find(".yatra-content").slideDown("slow");var a=s('<span class="icon fa fa-minus"/>'),i=t.closest("h4");t.hide(),i.append(a),t.remove()},listToggleClose:function(t){t.closest("li.yatra-list-item").find(".yatra-content").slideUp("slow");var a=s('<span class="icon fa fa-plus"/>'),i=t.closest("h4");t.hide(),i.append(a),t.remove()},addLoading:function(t){var a=t[0].tagName.toLowerCase();"a"===a||"button"===a?t.text(t.attr("data-loading-text")):t.val(t.attr("data-loading-text"))},removeLoading:function(t){var a=t[0].tagName.toLowerCase();"a"===a||"button"===a?t.text(t.attr("data-text")):t.val(t.attr("data-text"))},update_cart:function(t,a){var i=a.closest("form.yatra-cart-form"),e=this;s.ajax({type:"POST",url:yatra_params.ajax_url,data:t,beforeSend:function(){e.table_loading(a)},success:function(t){!0===t.success&&(i.find(".yatra-cart-table-wrapper").find("table.yatra_cart_table").remove(),i.find(".yatra-cart-table-wrapper").append(t.data)),i.find(".yatra-overlay").remove()},complete:function(){i.find(".yatra-overlay").remove()}})},table_loading:function(t){t.closest("form").append('<div class="yatra-overlay"></div>')},bookTour:function(t){var a=this,i=a.$booking_form.find(".yatra-book-now-btn");s.ajax({type:"POST",url:yatra_params.ajax_url,data:t,beforeSend:function(){a.addLoading(i)},success:function(t){!0===t.success&&(window.location=t.data.cart_page_url)},complete:function(){a.removeLoading(i)}})}});a.fn.YatraTabs=function(t){return this.each(function(){var i,t=a(this);(i=jQuery,{init:function(t){this.cacheDom(t),this.setupAria(),this.bindEvents()},cacheDom:function(){this.$el=t,this.$tabList=this.$el.find("ul.yatra-tab-wrap"),this.$tab=this.$tabList.find("li.item"),this.$tabFirst=this.$tabList.find("li.item:first-child a"),this.$tabLink=this.$tabList.find("li.item > a"),this.$tabPanel=this.$el.find("section"),this.$tabPanelFirstContent=this.$el.find("section > *:first-child"),this.$tabPanelFirst=this.$el.find("section:first-child"),this.$tabPanelNotFirst=this.$el.find("section:not(:first-of-type)")},bindEvents:function(){this.$tabLink.on("click",function(){this.changeTab()}.bind(this)),this.$tabLink.on("keydown",function(){this.changeTabKey()}.bind(this))},changeTab:function(){var t=i(event.target);event.preventDefault(),this.removeTabFocus(),this.setSelectedTab(t),this.hideAllTabPanels(),this.setSelectedTabPanel(t)},changeTabKey:function(){var t=i(event.target),a=this.setKeyboardDirection(t,event.keyCode);a.length&&(this.removeTabFocus(t),this.setSelectedTab(a)),this.hideAllTabPanels(),this.setSelectedTabPanel(i(document.activeElement))},hideAllTabPanels:function(){this.$tabPanel.attr("aria-hidden","true")},removeTabFocus:function(t){this.$el.find('[role="tab"]').attr({tabindex:"-1","data-aria-selected":null}).closest("li").removeClass("active")},selectFirstTab:function(){this.$tabFirst.attr({"data-aria-selected":"true",tabindex:"0"}).closest("li").addClass("active")},setupAria:function(){this.$tabList.attr("role","tablist"),this.$tab.attr("role","presentation"),this.$tabLink.attr({role:"tab",tabindex:"-1"}),this.$tabLink.each(function(){var t=i(this);t.attr("aria-controls",t.attr("href").substring(1))}),this.$tabPanel.attr({role:"tabpanel"}),this.$tabPanelFirstContent.attr({tabindex:"0"}),this.$tabPanelNotFirst.attr({"aria-hidden":"true"}),this.selectFirstTab()},setKeyboardDirection:function(t,a){var i=t.parents("li").prev().children('[role="tab"]'),e=t.parents("li").next().children('[role="tab"]');switch(a){case 37:return i;case 39:return e;default:return!1}},setSelectedTab:function(t){t.attr({"data-aria-selected":!0,tabindex:"0"}).focus().closest("li").addClass("active")},setSelectedTabPanel:function(t){this.$el.find("#"+t.attr("aria-controls")).attr("aria-hidden",null)}}).init(t)}),this},a(document).ready(function(){t.init(),a("#yatra-tour-tabs").YatraTabs(),a("#yatra-tour-sidebar-tabs").YatraTabs()})}(jQuery);